<!DOCTYPE html>
<html lang="ru">

<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="static/icons/icon.png">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mobile-detect/1.4.4/mobile-detect.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <link href="{% static 'lightbox/lightbox.css' %}" rel="stylesheet">
    {% block title %}
    <title>Jewelry by Svetlana Remizontseva</title>
    {% endblock %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>

<body>
    {% load static %}
    <div class="sidebar" data-aos="fade-right" data-aos-duration="1000">
        <div class="logo-details">
            <div class="logo_name">
                <img src="media/logo.png">
            </div>
            <i class='bx bxs-chevron-left-circle' id="btn"></i>
        </div>
        <ul class="nav-list">
            <li>
                <a class="active" href="#section_main">
                    <i class='bx bxs-home'></i>
                    <span class="links_name">Главная</span>
                </a>
                <span class="tooltip">Главная</span>
            </li>
            <li>
                <a href="#section_materials">
                    <i class='bx bxs-diamond'></i>
                    <span class="links_name">Материалы</span>
                </a>
                <span class="tooltip">Материалы</span>
            </li>
            <li>
                <a href="#section_works">
                    <i class='bx bx-images'></i>
                    <span class="links_name">Примеры работ</span>
                </a>
                <span class="tooltip">Примеры работ</span>
            </li>
            <li>
                <a href="#section_contacts">
                    <i class='bx bxs-phone'></i>
                    <span class="links_name">Контакты</span>
                </a>
                <span class="tooltip">Контакты</span>
            </li>
            <li>
                <a href="#section_delivery">
                    <i class='bx bxs-truck'></i>
                    <span class="links_name">Доставка и оплата</span>
                </a>
                <span class="tooltip">Доставка и оплата</span>
            </li>
        </ul>
        <ul class="social-list">
            {% for social_network in social_networks %}
            <li>
                <a href="{{social_link.link}}" target="_blank"> {{ social_network.svg_link | safe }}</a>
            </li>
            {% endfor %}
        </ul>

    </div>

    <main class="home-section">

        <section id="section_main"
            style="background-image: url('media/{{ main_photo.photo }}')">
            <div class="container-fluid">
                <div class="row justify-content-center align-items-center">
                    <div class="col-md-7 text-center">
                        <h1 class="text-white heading text-uppercase" data-aos="fade-up" data-aos-delay="450">Привет</h1>
                        <p data-aos="fade-up" data-aos-delay="500">
                            {{ main_text.content }}
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <section id="section_materials">
            <div class="container-fluid">
                <div class="row justify-content-center align-items-center">
                    <div class="col-md-7 text-center">
                        <h2 data-aos="fade-up" data-aos-delay="100">Материалы</h2>
                        <p data-aos="fade-up" data-aos-delay="200">{{ materials_text.content }}</p>
                        <div class="row" id="materials_row" data-aos="fade-up" data-aos-delay="200">
                            {% for gems in gems_list %}
                            <div class="col-md-4">
                                <ul class="gems-list">
                                    {% for gem in gems %}
                                    {% if gem.choice == 1 %}
                                    <li>
                                        <i class='bx bx-check' style='color:#1cb914'></i>
                                        <span class="gem-name">{{ gem.name }}</span>
                                    </li>
                                    {% else %}
                                    <li>
                                        <i class='bx bx-x' style='color:#d81010'></i>
                                        <span class="gem-name">{{ gem.name }}</span>
                                    </li>
                                    {% endif %}
                                    {% endfor %}
                                </ul>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="section_works">
            <div class="container-fluid">
                <h2 data-aos="fade-up" data-aos-delay="100">Примеры работ</h2>
                <div class="col-12">
                    {% for category in category_list %}
                    <div class="row align-items-stretch">
                        <h3 data-aos="fade-up" data-aos-delay="200">{{category}}</h3>
                        {% for image in images_list %}
                        {% if category == image.category %}
                        <div class="col-4 col-md-4 col-lg-2" id="images" data-aos="fade-up"
                            data-aos-delay={{image.data_aos_delay}}>
                            <a href="media/{{ image.name }}" data-lightbox="{{ category }}"
                                data-title="{{ image.decoration_name }}">
                                <img src="media/{{ image.name }}" class="img-fluid">
                            </a>
                        </div>
                        {% endif %}
                        {% endfor %}
                    </div>
                    {% endfor %}
                </div>
            </div>
        </section>

        <section id="section_contacts">
            <div class="container-fluid">
                <div class="row justify-content-center align-items-center">
                    <h2 data-aos="fade-up" data-aos-delay="100">Контакты</h2>
                    <div class="contacts col-md-7 text-center">
                        <p data-aos="fade-up" data-aos-delay="200">{{ contacts_text.content }}</p>
                        <ul data-aos="fade-up" data-aos-delay="200">
                            {% for social_network in social_networks %}
                            <li>
                                <a href="{{social_network.link}}" target="_blank">
                                    {{ social_network.svg_link | safe }}
                                    <span>{{social_network.name}}</span>
                                </a>
                            </li>
                            {% endfor %}
                        </ul>                
                    </div>
                    <div class="contact-form col-md-7 text-left" data-aos="fade-up" data-aos-delay="200">
                        <form action="" method="post">
                            {% csrf_token %}
                            {{ form.name }}
                            {{ form.phone_number }}
                            {{ form.message }}
                            <input class="button" type="submit" value="Отправить">
                        </form>
                    </div>
                </div>
        </section>

        <section id="section_delivery">
            <div class="container-fluid">
                <div class="row justify-content-center align-items-center">
                    <div class="col-md-7 text-center">
                        <h2 data-aos="fade-up" data-aos-delay="100">Доставка и оплата</h2>
                        <p data-aos="fade-up" data-aos-delay="200">{{ delivery_text.content }}</p>
                        <p data-aos="fade-up" data-aos-delay="200">{{ payment_text.content }}</p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"
        integrity="sha384-eMNCOe7tC1doHpGoWe/6oMVemdAVTMs2xqW4mwXrXsW0L84Iytr2wi5v2QjrP/xp"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.min.js"
        integrity="sha384-cn7l7gDp0eyniUwwAZgrzD06kc/tftFf19TOAs2zVinnD/C7E91j9yyk5//jjpt/"
        crossorigin="anonymous"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        let sidebar = document.querySelector(".sidebar");
        let closeBtn = document.querySelector("#btn");
        closeBtn.addEventListener("click", () => {
            sidebar.classList.toggle("close");
            menuBtnChange();
        });
        function menuBtnChange() {
            if (sidebar.classList.contains("close")) {
                closeBtn.classList.replace("bxs-chevron-left-circle", "bxs-chevron-right-circle");
            } else {
                closeBtn.classList.replace("bxs-chevron-right-circle", "bxs-chevron-left-circle");
            }
        }
    </script>
    <script>
        AOS.init();
    </script>
    <script src="{% static 'lightbox/lightbox.js' %}"></script>
    <script>
        lightbox.option({
            'resizeDuration': 100,
            'wrapAround': true,
            'alwaysShowNavOnTouchDevices': true,
            'fadeDuration': 300,
            'imageFadeDuration': 300,
            'albumLabel': 'Изображение %1 из %2'
        })
    </script>
    <script>
        let section = document.querySelectorAll('section');
        let sidebarLinks = document.querySelectorAll('.sidebar li a');

        window.onscroll = () => {

            section.forEach(sec => {

                let top = window.scrollY;
                let offset = sec.offsetTop -= 100;
                let height = sec.offsetHeight;
                let id = sec.getAttribute('id');

                if (top >= offset && top < offset + height) {
                    sidebarLinks.forEach(links => {
                        links.classList.remove('active');
                        document.querySelector('.sidebar li a[href*=' + id + ']').classList.add('active');
                    });
                };
            });
        };
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.10/jquery.mask.js"></script>
    <script>
       var form = $("form");
       form.submit(function (e) {
            e.preventDefault();
            var formData = new FormData(this);
            $.ajax({
                url: window.location.pathname,
                type: 'POST',
                data: formData,
                cache: false,
                contentType: false,
                processData: false,
                complete: $('input[type="text"],textarea').val('')
            });
        });
    </script>
    <script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.6/jquery.inputmask.js></script>
    <script>
        $(document).ready(function(){
            $('#id_phone_number').inputmask("+7(999)9999999");
        });
    </script>
    <script>
        let detect = new MobileDetect(window.navigator.userAgent);
        let menuButton = document.querySelector("#btn");

        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent)) {
            menuButton.classList.replace("bxs-chevron-left-circle", "bxs-chevron-right-circle");
            sidebar.classList.toggle("close");
        };
    </script>
    <script>
        $("form").on('submit', function(event) {
              alert("Сообщение отправлено!");
        });
    </script>
    
</body>

</html>